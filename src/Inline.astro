---
import { Gutter, getSafeGutter, BaseTheme, CSSLength } from '@chisel-ui/core'
import { InlineClusterProps } from '@chisel-ui/inline-cluster/astro'
import '@chisel-ui/inline-cluster/css'
import './Inline.css'

export interface InlineProps extends InlineClusterProps {
    stretch?: 'all' | 'start' | 'end' | number
    switchAt?: CSSLength | number
}

function shouldUseSwitch(switchAt?: CSSLength | number) {
    if (switchAt && switchAt > -1) {
        return true
    }

    if BaseTheme(typeof switchAt === 'string' && typeof CSS !== undefined) {
        return CSS.supports(`height: ${switchAt}`)
    }

    return false
}

const { justify = 'start', align = 'start', gutter = '0px', theme = {}, as: Tag = 'div', stretch, switchAt } = Astro.props as InlineClusterProps

const maybeGutter = getSafeGutter(theme, gutter)
---

<Tag data-chisel-inline data-chisel-inline-cluster style={`--gutter: ${maybeGutter}; --justify: ${justify}; --align: ${align};`} data-stretch={typeof stretch === 'string' && stretch} data-stretch-child={typeof stretch === 'number' && stretch}>
    <slot />
</Tag>
